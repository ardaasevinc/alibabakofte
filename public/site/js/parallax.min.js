function mr_parallax() {
    function e(e) {
        for (var t = 0; t < e.length; t++)
            if ("undefined" != typeof document.body.style[e[t]]) return e[t];
        return null;
    }

    function t() {
        ((B = void 0 == window.mr_variant ? !1 : !0),
            B &&
                ((b = $(".viu").get(0)),
                void 0 != b &&
                    (b.scrollBy = function (e, t) {
                        this.scrollTop += t;
                    })),
            void 0 != b &&
                (b.addEventListener("scroll", i, { passive: true }),
                // Modern tarayıcılar için passive: false zorunlu
                window.addWheelListener(b, s, { passive: false }),
                window.addEventListener(
                    "resize",
                    function () {
                        ((f = Math.max(
                            document.documentElement.clientHeight,
                            window.innerHeight || 0,
                        )),
                            (w = n()),
                            k.profileParallaxElements());
                    },
                    { passive: true },
                ),
                a()));
    }

    function n() {
        var e = 0;
        return (void 0 != b && (e = $(b).find("nav:first").outerHeight(!0)), e);
    }

    function o(e, t, n, o) {
        var a = e - 1;
        return (
            (a /= o),
            (e /= o),
            a--,
            e--,
            n * (e * e * e * e * e + 1) + t - (n * (a * a * a * a * a + 1) + t)
        );
    }

    function a() {
        if (h) {
            for (var e = d.length, t = r(); e--; ) l(d[e], t);
            h = !1;
        }
        (p &&
            ((E += -x * o(g, 0, M, P)),
            (E > _ || -_ > E) && (b.scrollBy(0, E), (E = 0)),
            g++,
            g > P &&
                ((g = 0),
                (p = !1),
                (v = !0),
                (x = 0),
                (T = 0),
                (y = 0),
                (E = 0))),
            m(a));
    }

    function l(e, t) {
        if (B) {
            if (t + f > e.elemTop && t < e.elemBottom) {
                var n = e.isFirstSection
                    ? "translate3d(0, " + t / 2 + "px, 0)"
                    : "translate3d(0, " + (t - e.elemTop - w) / 2 + "px, 0)";
                e.imageHolder.style[c] = n;
            }
        } else if (t + f > e.elemTop && t < e.elemBottom) {
            var n = e.isFirstSection
                ? "translate3d(0, " + t / 2 + "px, 0)"
                : "translate3d(0, " + (t + f - e.elemTop) / 2 + "px, 0)";
            e.imageHolder.style[c] = n;
        }
    }

    function r() {
        return b != window
            ? b.scrollTop
            : document.documentElement.scrollTop || document.body.scrollTop;
    }

    function i() {
        h = !0;
    }

    // Hata veren kritik fonksiyon düzeltildi
    function s(e) {
        if (e.cancelable && typeof e.preventDefault === "function") {
            e.preventDefault();
        }
        x = e.notRealWheel
            ? -e.deltaY / 4
            : 1 == e.deltaMode
              ? -e.deltaY / 3
              : 100 === Math.abs(e.deltaY)
                ? -e.deltaY / 120
                : -e.deltaY / 40;
        x = -H > x ? -H : x;
        x = x > H ? H : x;
        p = !0;
        g = D;
    }

    var d,
        m =
            window.requestAnimationFrame ||
            window.mozRequestAnimationFrame ||
            window.webkitRequestAnimationFrame ||
            window.msRequestAnimationFrame,
        u = [
            "transform",
            "msTransform",
            "webkitTransform",
            "mozTransform",
            "oTransform",
        ],
        c = e(u),
        f = Math.max(
            document.documentElement.clientHeight,
            window.innerHeight || 0,
        ),
        w = 0,
        h = !1,
        p = !1,
        v = !0,
        g = 0,
        x = 0,
        T = 0,
        y = 0,
        E = 0,
        H = 2,
        D = 4,
        M = 300,
        _ = 1,
        P = 30,
        b = window,
        k = this,
        B = void 0 == window.mr_variant ? !1 : !0;

    $(document).ready(function () {
        "use strict";
        f = Math.max(
            document.documentElement.clientHeight,
            window.innerHeight || 0,
        );
        if (
            /Android|iPad|iPhone|iPod|BlackBerry|Windows Phone/i.test(
                navigator.userAgent || navigator.vendor || window.opera,
            )
        ) {
            $(".parallax").removeClass("parallax");
        } else if (m) {
            window.mr_parallax.profileParallaxElements();
            t();
        }
    });

    $(window).load(function () {
        f = Math.max(
            document.documentElement.clientHeight,
            window.innerHeight || 0,
        );
        w = n();
        window.mr_parallax.profileParallaxElements();
    });

    this.profileParallaxElements = function () {
        d = [];
        w = n();
        var selector =
            ".parallax > .background-image-holder, .parallax ul.slides > li > .background-image-holder";
        if (B) selector = ".viu " + selector;

        $(selector).each(function () {
            var e = $(this).closest(".parallax"),
                t = B ? e.position().top : e.offset().top;
            d.push({
                section: e.get(0),
                outerHeight: e.outerHeight(),
                elemTop: t,
                elemBottom: t + e.outerHeight(),
                isFirstSection: e.is(":first-of-type"),
                imageHolder: $(this).get(0),
            });
            var trans = e.is(":first-of-type")
                ? r() / 2
                : B
                  ? (r() - t - w) / 2
                  : (r() + f - t - w) / 2;
            k.mr_setTranslate3DTransform($(this).get(0), trans);
        });
    };

    this.mr_setTranslate3DTransform = function (e, t) {
        e.style[c] = "translate3d(0, " + t + "px, 0)";
    };
}

window.mr_parallax = new mr_parallax();

// Modern Wheel Listener Yaması
(function (e, t) {
    var a,
        l = "";
    var o = e.addEventListener
        ? "addEventListener"
        : ((l = "on"), "attachEvent");
    a =
        "onwheel" in t.createElement("div")
            ? "wheel"
            : void 0 !== t.onmousewheel
              ? "mousewheel"
              : "DOMMouseScroll";

    e.addWheelListener = function (e, t, i) {
        var options =
            typeof i === "object" ? i : { capture: i || false, passive: false };
        n(e, a, t, options);
        if ("DOMMouseScroll" == a) n(e, "MozMousePixelScroll", t, options);
    };

    function n(t, n, r, i) {
        t[o](
            l + n,
            "wheel" == a
                ? r
                : function (t) {
                      !t && (t = e.event);
                      var n = {
                          originalEvent: t,
                          target: t.target || t.srcElement,
                          type: "wheel",
                          deltaMode: "MozMousePixelScroll" == t.type ? 0 : 1,
                          deltaX: 0,
                          deltaZ: 0,
                          notRealWheel: 1,
                          preventDefault: function () {
                              if (t.cancelable)
                                  t.preventDefault
                                      ? t.preventDefault()
                                      : (t.returnValue = !1);
                          },
                      };
                      "mousewheel" == a
                          ? ((n.deltaY = (-1 / 40) * t.wheelDelta),
                            t.wheelDeltaX &&
                                (n.deltaX = (-1 / 40) * t.wheelDeltaX))
                          : (n.deltaY = t.detail / 3);
                      return r(n);
                  },
            i,
        );
    }
})(window, document);
